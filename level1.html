<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>CodeBusters C++ – Ниво 1</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" /> 
  <link rel="stylesheet" href="stylelevels.css"/>
</head>
<body>


<header>
  <h1>CodeBusters C++ – Ниво 1: Здравей, изход</h1>
</header>

<main>
  <div id="container">
   
    <div id="instructions">
      <h2>Мисия</h2>
      <p>
        Довършете едноредовата инструкция <strong>cout<<</strong> между <strong>main()</strong> и <strong>return 0;</strong>.<br>
        Тя трябва да изведе точно <strong>Hello, C++ World!</strong> и да завършва с точка и запетая.<br>
        За да изведете текста в командата той трябва да е в кавички <strong>" "</strong> <br> 
        и след тях да завършите с точка и запетая <strong>;</strong>  

      </p>
    </div>

   
    <div id="playground">
      <div id="codeWrapper">
        <pre class="codeLine">#include &lt;iostream&gt;</pre>
        <pre class="codeLine">using namespace std;</pre>
        <pre class="codeLine">int main() {</pre>
        <input type="text" id="codeInput" class="codeInput" placeholder="cout<< <– Пишете тук –>" autocomplete="off" spellcheck="false" />
        <pre class="codeLine">    return 0;</pre>
        <pre class="codeLine">}</pre>
      </div>
      <button id="runBtn">Стартирай кода</button>
      <div id="outputWindow"></div>
      <div id="levelButtons">
  <button id="nextLevelBtn" style="display: none;">Следващо ниво</button>
  <a href="main.html"><button id="menuBtn">Меню</button></a>
</div>

    </div>
  </div>
</main>

<footer>
  &copy; Направено от Камен и Георги – най‑добрите програмисти
</footer>

<script>
(() => {
  const input = document.getElementById('codeInput');
  const btn = document.getElementById('runBtn');
  const out = document.getElementById('outputWindow');

  
  input.addEventListener('keydown', e => {
    if (e.key === 'Enter') { e.preventDefault(); btn.click(); }
  });

const nextBtn = document.getElementById('nextLevelBtn');
nextBtn.addEventListener('click', () => {
  window.location.href = 'level2.html';
});

  function check(line) {
    const pattern = /^\s*cout\s*<<\s*"Hello,\s*C\+\+\s*World!"\s*;\s*$/;
    if (pattern.test(line)) return { ok: true };

    if (!/^\s*cout/.test(line)) return { ok: false, msg: 'Редът трябва да започва с cout<<' };
    if (!/;\s*$/.test(line)) return { ok: false, msg: 'Не забравяйте точката и запетая в края' };
    if (!/Hello,\s*C\+\+\s*World!/.test(line)) return { ok: false, msg: 'Текстът на изхода трябва точно да съвпада с "Hello, C++ World!"' };
    return { ok: false, msg: 'Проверете интервалите/форматирането и дали няма допълнителен код.' };
  }

  btn.addEventListener('click', () => {
  const res = check(input.value.trim());
  out.innerHTML = '';
  const nextBtn = document.getElementById('nextLevelBtn');

    if (res.ok) {
    out.innerHTML = '<span class="success">Hello, C++ World!</span>\n\n✅ Нивото е преминато!';
    nextBtn.style.display = 'inline-block'; 
  } else {
    out.innerHTML = '<span class="error">⛔ ' + res.msg + '</span>';
    nextBtn.style.display = 'none'; 
  }
  });
})();

</script>
</body>
</html>
